<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.w3.org/1999/xhtml">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Thông tin nhân viên - Hệ Thống Quản Lý Nhân Sự</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Bootstrap Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
  <!-- Custom CSS -->
  <link rel="stylesheet" href="/css/style.css">
</head>

<body>
<div id="wrapper">
  <!-- Sidebar -->
  <div th:replace="~{layout/sidebar :: sidebar}"></div>


  <!-- Content Wrapper -->
  <div class="content-wrapper">
    <!-- Topbar -->
    <div th:replace="~{layout/header :: header}"></div>


    <!-- Begin Page Content -->
    <div class="container-fluid">
      <!-- Page Heading -->
      <div class="d-sm-flex align-items-center justify-content-between mb-4">
        <h1 class="h3 mb-0 text-gray-800">Thông tin nhân viên</h1>
        <div>
          <a th:href="@{/user/update/{id}(id=${user.id})}" class="btn btn-warning btn-sm me-2">
            <i class="bi bi-pencil me-1"></i> Chỉnh sửa
          </a>
          <a th:href="@{/user}" class="btn btn-secondary btn-sm">
            <i class="bi bi-arrow-left me-1"></i> Quay lại
          </a>
        </div>
      </div>

      <div class="row">
        <div class="col-lg-4">
          <!-- Profile Card -->
          <div class="card shadow mb-4">
            <div class="card-body text-center">
              <img th:src="@{/images/upload/${user.avatar}}" alt="Avatar"
                   class="img-profile rounded-circle mb-3"
                   style="width: 150px; height: 150px; object-fit: cover;">
              <h4 class="mb-0">[[${user.hoTen}]]</h4>
              <p class="text-muted">[[${user.chucVu.tenChucVu}]]</p>
              <div class="mb-3">
                <span class="badge bg-success">[[${user.trangThai}]]</span>
              </div>
              <div class="d-flex justify-content-center mb-2">
                <button class="btn btn-primary me-1">
                  <i class="bi bi-envelope me-1"></i> Gửi email
                </button>
                <button class="btn btn-outline-primary">
                  <i class="bi bi-telephone me-1"></i> Gọi
                </button>
              </div>
            </div>
          </div>

          <!-- Contact Information -->
          <div class="card shadow mb-4">
            <div class="card-header py-3">
              <h6 class="m-0 font-weight-bold text-primary">Thông tin liên hệ</h6>
            </div>
            <div class="card-body">
              <div class="mb-3">
                <div class="small text-gray-500">Email</div>
                <div>[[${user.email}]]</div>
              </div>
              <div class="mb-3">
                <div class="small text-gray-500">Số điện thoại</div>
                <div>[[${user.soDienThoai}]]</div>
              </div>
              <div class="mb-3">
                <div class="small text-gray-500">Địa chỉ</div>
                <div>[[${user.diaChi}]]</div>
              </div>
              <div class="mb-3">
                <div class="small text-gray-500">Ngày sinh</div>
                <div>[[${user.ngaySinh}]]</div>
              </div>
              <div>
                <div class="small text-gray-500">CCCD/CMND</div>
                <div>[[${user.cccd}]]</div>
              </div>
            </div>
          </div>

          <!-- Account Information -->
          <div class="card shadow mb-4">
            <div class="card-header py-3">
              <h6 class="m-0 font-weight-bold text-primary">Thông tin tài khoản</h6>
            </div>
            <div class="card-body">
              <div class="mb-3">
                <div class="small text-gray-500">Quyền</div>
                <div>[[${user.chucVu.quyen.tenQuyen}]]</div>
              </div>
              <div class="mb-3">
                <div class="small text-gray-500">Trạng thái làm việc</div>
                <div>[[${user.trangThai}]]</div>
              </div>
            </div>
          </div>
        </div>

        <div class="col-lg-8">
          <!-- Employee Details -->
          <div class="card shadow mb-4">
            <div class="card-header py-3">
              <h6 class="m-0 font-weight-bold text-primary">Thông tin nhân viên</h6>
            </div>
            <div class="card-body">
              <div class="row mb-3">
                <div class="col-md-6">
                  <div class="small text-gray-500">Mã nhân viên</div>
                  <div>[[${user.id}]]</div>
                </div>
                <div class="col-md-6">
                  <div class="small text-gray-500">Tên nhân viên</div>
                  <div>[[${user.hoTen}]]</div>
                </div>
                <div class="col-md-6">
                  <div class="small text-gray-500">Giới tính</div>
                  <div>[[${user.gioiTinh}]] ngày</div>
                </div>
              </div>
              <div class="row mb-3">
                <div class="col-md-6">
                  <div class="small text-gray-500">Phòng ban</div>
                  <div>[[${user.chucVu.phongBan.tenPhongBan}]]</div>
                </div>
                <div class="col-md-6">
                  <div class="small text-gray-500">Chức vụ</div>
                  <div>[[${user.chucVu.tenChucVu}]]</div>
                </div>
              </div>
              <div class="row mb-3">
                <div class="col-md-6">
                  <div class="small text-gray-500">Trình độ học vấn</div>
                  <div>[[${user.hocVan}]]</div>
                </div>
                <div class="col-md-6">
                  <div class="small text-gray-500">Thâm niên</div>
                  <div>[[${user.thamNien}]]</div>
                </div>
              </div>
              <div class="row">
                <div class="col-md-6">
                  <div class="small text-gray-500">Lương cơ bản</div>
                  <div>[[${user.luongHienTai}]] VND</div>
                </div>
                <div class="col-md-6">
                  <div class="small text-gray-500">Số ngày phép còn lại</div>
                  <div>[[${user.soNgayPhep}]] ngày</div>
                </div>
              </div>
            </div>
          </div>

          <!-- Contract Information -->
          <div class="card shadow mb-4">
            <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
              <h6 class="m-0 font-weight-bold text-primary">Thông tin hợp đồng</h6>
              <a th:href="@{/contract}" class="btn btn-sm btn-primary">
                Xem hợp đồng
              </a>
            </div>
            <div class="card-body" th:if="${hopDongs != null}">
              <div class="row mb-3">
                <div class="col-md-6">
                  <div class="small text-gray-500">Mã hợp đồng</div>
                  <div>[[${hopDongs.id}]]</div>
                </div>
                <div class="col-md-6">
                  <div class="small text-gray-500">Loại hợp đồng</div>
                  <div>[[${hopDongs.loaiHopDong}]]</div>
                </div>
              </div>
              <div class="row mb-3">
                <div class="col-md-6">
                  <div class="small text-gray-500">Ngày bắt đầu</div>
                  <div>[[${hopDongs.ngayBatDau}]]</div>
                </div>
                <div class="col-md-6">
                  <div class="small text-gray-500">Ngày kết thúc</div>
                  <div>[[${hopDongs.ngayKetThuc}]]</div>
                </div>
              </div>
              <div class="row">
                <div class="col-md-6">
                  <div class="small text-gray-500">Lương cơ bản gốc</div>
                  <div>[[${hopDongs.luongCoBan}]]</div>
                </div>
                <div class="col-md-6">
                  <div class="small text-gray-500">Trạng thái</div>
                  <div>
                    <span th:if="${hopDongs.trangThai.equals('Còn hiệu lực')}" class="badge bg-success">Còn hiệu lực</span>
                    <span th:if="${hopDongs.trangThai.equals('Hết hạn')}" class="badge bg-success">Hết hạn</span>
                    <span th:if="${hopDongs.trangThai.equals('Chấm dứt')}" class="badge bg-success">Chấm dứt</span>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Tabs for additional information -->
          <div class="card shadow mb-4">
            <div class="card-header py-3">
              <ul class="nav nav-tabs card-header-tabs" id="employeeTabs" role="tablist">
                <li class="nav-item" role="presentation">
                  <button class="nav-link active" id="attendance-tab" data-bs-toggle="tab"
                          data-bs-target="#attendance" type="button" role="tab"
                          aria-controls="attendance" aria-selected="true">
                    Chấm công
                  </button>
                </li>
                <li class="nav-item" role="presentation">
                  <button class="nav-link" id="salary-tab" data-bs-toggle="tab"
                          data-bs-target="#salary" type="button" role="tab" aria-controls="salary"
                          aria-selected="false">
                    Lương thưởng
                  </button>
                </li>
                <li class="nav-item" role="presentation">
                  <button class="nav-link" id="leave-tab" data-bs-toggle="tab"
                          data-bs-target="#leave" type="button" role="tab" aria-controls="leave"
                          aria-selected="false">
                    Nghỉ phép
                  </button>
                </li>
                <li class="nav-item" role="presentation">
                  <button class="nav-link" id="projects-tab" data-bs-toggle="tab"
                          data-bs-target="#projects" type="button" role="tab" aria-controls="projects"
                          aria-selected="false">
                    Dự án
                  </button>
                </li>
              </ul>
            </div>
            <div class="card-body">
              <div class="tab-content" id="employeeTabsContent">
                <!-- Attendance Tab -->
                <div class="tab-pane fade show active" id="attendance" role="tabpanel"
                     aria-labelledby="attendance-tab">
                  <h6 class="font-weight-bold">Chấm công tháng 12/2023</h6>
                  <div class="table-responsive">
                    <table class="table table-bordered">
                      <thead>
                      <tr>
                        <th>Ngày</th>
                        <th>Giờ vào</th>
                        <th>Giờ ra</th>
                        <th>Trạng thái</th>
                        <th>Tăng ca</th>
                      </tr>
                      </thead>
                      <tbody>
                      <tr>
                        <td>01/12/2023</td>
                        <td>08:00</td>
                        <td>17:30</td>
                        <td>
                          <span class="badge bg-success">Đúng giờ</span>
                        </td>
                        <td>1.5 giờ</td>
                      </tr>
                      <tr>
                        <td>02/12/2023</td>
                        <td>08:15</td>
                        <td>17:30</td>
                        <td>
                          <span class="badge bg-warning text-dark">Muộn</span>
                        </td>
                        <td>0 giờ</td>
                      </tr>
                      <tr>
                        <td>03/12/2023</td>
                        <td>08:00</td>
                        <td>17:30</td>
                        <td>
                          <span class="badge bg-success">Đúng giờ</span>
                        </td>
                        <td>0 giờ</td>
                      </tr>
                      <tr>
                        <td>04/12/2023</td>
                        <td>08:00</td>
                        <td>18:30</td>
                        <td>
                          <span class="badge bg-success">Đúng giờ</span>
                        </td>
                        <td>1 giờ</td>
                      </tr>
                      <tr>
                        <td>05/12/2023</td>
                        <td>08:00</td>
                        <td>17:30</td>
                        <td>
                          <span class="badge bg-success">Đúng giờ</span>
                        </td>
                        <td>0 giờ</td>
                      </tr>
                      </tbody>
                    </table>
                  </div>
                  <div class="text-end">
                    <a th:href="@{/attendance}" class="btn btn-sm btn-primary">
                      Xem tất cả
                    </a>
                  </div>
                </div>

                <!-- Salary Tab -->
                <div class="tab-pane fade" id="salary" role="tabpanel" aria-labelledby="salary-tab">
                  <h6 class="font-weight-bold">Lương thưởng gần đây</h6>
                  <div class="table-responsive">
                    <table class="table table-bordered">
                      <thead>
                      <tr>
                        <th>Tháng</th>
                        <th>Lương cơ bản</th>
                        <th>Phụ cấp</th>
                        <th>Thưởng</th>
                        <th>Tăng ca</th>
                        <th>Thuế</th>
                        <th>Tổng nhận</th>
                      </tr>
                      </thead>
                      <tbody>
                      <tr>
                        <td>12/2023</td>
                        <td>15,000,000</td>
                        <td>2,000,000</td>
                        <td>1,500,000</td>
                        <td>1,200,000</td>
                        <td>-1,970,000</td>
                        <td>17,730,000</td>
                      </tr>
                      <tr>
                        <td>11/2023</td>
                        <td>15,000,000</td>
                        <td>2,000,000</td>
                        <td>0</td>
                        <td>900,000</td>
                        <td>-1,790,000</td>
                        <td>16,110,000</td>
                      </tr>
                      <tr>
                        <td>10/2023</td>
                        <td>15,000,000</td>
                        <td>2,000,000</td>
                        <td>2,000,000</td>
                        <td>1,500,000</td>
                        <td>-2,050,000</td>
                        <td>18,450,000</td>
                      </tr>
                      </tbody>
                    </table>
                  </div>
                  <div class="text-end">
                    <a th:href="@{/salary}" class="btn btn-sm btn-primary">
                      Xem tất cả
                    </a>
                  </div>
                </div>

                <!-- Leave Tab -->
                <div class="tab-pane fade" id="leave" role="tabpanel" aria-labelledby="leave-tab">
                  <h6 class="font-weight-bold">Đơn nghỉ phép gần đây</h6>
                  <div class="table-responsive">
                    <table class="table table-bordered">
                      <thead>
                      <tr>
                        <th>Ngày bắt đầu</th>
                        <th>Ngày kết thúc</th>
                        <th>Số ngày</th>
                        <th>Lý do</th>
                        <th>Trạng thái</th>
                      </tr>
                      </thead>
                      <tbody>
                      <tr>
                        <td>15/11/2023</td>
                        <td>17/11/2023</td>
                        <td>3</td>
                        <td>Việc gia đình</td>
                        <td>
                          <span class="badge bg-success">Đã duyệt</span>
                        </td>
                      </tr>
                      <tr>
                        <td>05/10/2023</td>
                        <td>05/10/2023</td>
                        <td>1</td>
                        <td>Khám sức khỏe</td>
                        <td>
                          <span class="badge bg-success">Đã duyệt</span>
                        </td>
                      </tr>
                      <tr>
                        <td>20/09/2023</td>
                        <td>22/09/2023</td>
                        <td>3</td>
                        <td>Nghỉ phép năm</td>
                        <td>
                          <span class="badge bg-success">Đã duyệt</span>
                        </td>
                      </tr>
                      </tbody>
                    </table>
                  </div>
                  <div class="text-end">
                    <a th:href="@{/leave}" class="btn btn-sm btn-primary">
                      Xem tất cả
                    </a>
                  </div>
                </div>

                <!-- Projects Tab -->
                <div class="tab-pane fade" id="projects" role="tabpanel"
                     aria-labelledby="projects-tab">
                  <h6 class="font-weight-bold">Dự án tham gia</h6>
                  <div class="table-responsive">
                    <table class="table table-bordered">
                      <thead>
                      <tr>
                        <th>Tên dự án</th>
                        <th>Vai trò</th>
                        <th>Ngày bắt đầu</th>
                        <th>Ngày kết thúc</th>
                        <th>Trạng thái</th>
                      </tr>
                      </thead>
                      <tbody>
                      <tr>
                        <td>Phát triển phần mềm XYZ</td>
                        <td>Quản lý dự án</td>
                        <td>01/10/2023</td>
                        <td>31/03/2024</td>
                        <td>
                          <span class="badge bg-info">Đang thực hiện</span>
                        </td>
                      </tr>
                      <tr>
                        <td>Nâng cấp hệ thống ABC</td>
                        <td>Trưởng nhóm</td>
                        <td>01/07/2023</td>
                        <td>30/09/2023</td>
                        <td>
                          <span class="badge bg-success">Hoàn thành</span>
                        </td>
                      </tr>
                      <tr>
                        <td>Triển khai hệ thống DEF</td>
                        <td>Thành viên</td>
                        <td>01/01/2023</td>
                        <td>30/06/2023</td>
                        <td>
                          <span class="badge bg-success">Hoàn thành</span>
                        </td>
                      </tr>
                      </tbody>
                    </table>
                  </div>
                  <div class="text-end">
                    <a th:href="@{/project}" class="btn btn-sm btn-primary">
                      Xem tất cả
                    </a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- /.container-fluid -->
  </div>
  <!-- End of Content Wrapper -->
</div>
<!-- End of Page Wrapper -->

<!-- Scroll to Top Button-->
<a class="scroll-to-top rounded" href="#page-top">
  <i class="bi bi-arrow-up"></i>
</a>

<!-- Logout Modal-->
<div class="modal fade" id="logoutModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Bạn muốn đăng xuất?</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">Chọn "Đăng xuất" bên dưới nếu bạn đã sẵn sàng kết thúc phiên làm việc hiện tại.
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Hủy</button>
        <a class="btn btn-primary" href="login.html">Đăng xuất</a>
      </div>
    </div>
  </div>
</div>

<!-- Bootstrap core JavaScript-->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<!-- Custom scripts -->
<script src="/js/script.js"></script>
</body>

</html>